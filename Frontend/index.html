<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>lighterBase</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .sidebar-transition {
            transition: transform 0.3s ease-in-out;
        }
        .bottom-modal {
            transform: translateY(100%);
            transition: transform 0.3s ease-in-out;
        }
        .bottom-modal.show {
            transform: translateY(0);
        }
    </style>
</head>
<body class="bg-[#121414] text-gray-200 h-screen overflow-hidden">
    <div class="flex h-full">
        <!-- 左侧边栏 -->
        <div class="w-[4%] bg-[#15151D] flex flex-col items-center py-4">
            <!-- Logo -->
            <div class="mb-8">
                <button id="logo-btn" class="w-10 h-10 bg-[#2B2F31] hover:bg-[#3a3f41] rounded-lg flex items-center justify-center text-white font-bold transition-colors">
                    Logo
                </button>
            </div>
            
            <!-- 导航按钮 -->
            <div class="flex flex-col space-y-4 flex-1">
                <button id="settings-btn" class="nav-btn w-12 h-12 bg-[#1B1E1F] hover:bg-[#2B2F31] rounded-lg flex items-center justify-center transition-colors">
                    <span class="text-sm">设置</span>
                </button>
                <button id="records-btn" class="nav-btn w-12 h-12 bg-[#1B1E1F] hover:bg-[#2B2F31] rounded-lg flex items-center justify-center transition-colors">
                    <span class="text-sm">记录</span>
                </button>
                <button id="folder-btn" class="nav-btn w-12 h-12 bg-[#1B1E1F] hover:bg-[#2B2F31] rounded-lg flex items-center justify-center transition-colors">
                    <span class="text-sm">文件夹</span>
                </button>
                <button id="database-btn" class="nav-btn w-12 h-12 bg-[#1B1E1F] hover:bg-[#2B2F31] rounded-lg flex items-center justify-center transition-colors">
                    <span class="text-sm">数据库</span>
                </button>
            </div>
        </div>

        <!-- 主要内容区域 -->
        <div class="flex-1 flex relative">
            <!-- 右侧边栏 -->
            <div id="right-sidebar" class="w-64 bg-[#181A1B] p-4 flex flex-col sidebar-transition"></div>

            <!-- 主工作区 -->
            <div id="main-workspace" class="flex-1 flex flex-col">
                <!-- 默认空白工作区 -->
                <div id="default-workspace" class="flex-1 flex items-center justify-center">
                    <span class="text-gray-500 text-xl">欢迎使用 lighterBase</span>
                </div>
            </div>

            <!-- 右侧滑入侧边栏 -->
            <div id="right-slidebar" class="w-80 bg-[#181A1B] p-4 flex flex-col sidebar-transition transform translate-x-full absolute right-0 top-0 h-full">
                <div class="flex justify-between items-center mb-4">
                    <h3 id="slidebar-title" class="text-lg font-semibold"></h3>
                    <button id="close-slidebar" class="text-gray-400 hover:text-white">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
                <div id="slidebar-content" class="flex-1 overflow-y-auto"></div>
            </div>
        </div>
    </div>

    <!-- 底部确认窗口 -->
    <div id="bottom-modal" class="bottom-modal fixed bottom-0 left-0 right-0 bg-[#181A1B] p-6 shadow-lg">
        <div class="flex justify-between items-center">
            <span id="modal-message">确认删除选中的记录吗？</span>
            <div class="space-x-4">
                <button id="modal-cancel" class="px-4 py-2 bg-[#2B2F31] hover:bg-[#3a3f41] rounded transition-colors">取消</button>
                <button id="modal-confirm" class="px-4 py-2 bg-red-600 hover:bg-red-700 rounded transition-colors">确认</button>
            </div>
        </div>
    </div>

    <script>
        // 右侧边栏内容模板
        const sidebarContent = {
            logo: `
                <h3 class="text-lg font-semibold mb-4">系统信息</h3>
                <div class="space-y-3">
                    <p class="text-sm text-gray-400">数据库管理系统 v1.0</p>
                    <p class="text-sm text-gray-400">已连接用户: admin</p>
                    <button class="w-full px-4 py-3 bg-[#2B2F31] hover:bg-[#3a3f41] rounded-lg text-left transition-colors">
                        系统设置
                    </button>
                </div>
            `,
            settings: `
                <h3 class="text-lg font-semibold mb-4">设置</h3>
                <div class="space-y-3">
                    <button id="ai-settings" class="w-full px-4 py-3 bg-[#2B2F31] hover:bg-[#3a3f41] rounded-lg text-left transition-colors">
                        AI
                    </button>
                    <button id="account-settings" class="w-full px-4 py-3 bg-[#1B1E1F] hover:bg-[#2B2F31] rounded-lg text-left transition-colors">
                        Account
                    </button>
                </div>
            `,
            records: ``,
            folder: `
                <h3 class="text-lg font-semibold mb-4">文件管理</h3>
                <div class="space-y-3">
                    <button class="w-full px-4 py-3 bg-[#2B2F31] hover:bg-[#3a3f41] rounded-lg text-left transition-colors">
                        新建文件夹
                    </button>
                    <button class="w-full px-4 py-3 bg-[#1B1E1F] hover:bg-[#2B2F31] rounded-lg text-left transition-colors">
                        导入文件
                    </button>
                </div>
            `,
            database: `
                <h3 class="text-lg font-semibold mb-4">数据库操作</h3>
                <div class="space-y-3">
                    <button id="create-db" class="w-full mb-3 px-4 py-3 bg-[#2B2F31] hover:bg-[#3a3f41] rounded-lg text-left transition-colors">
                        Create DB
                    </button>
                    <button id="permissions" class="w-full px-4 py-3 bg-[#1B1E1F] hover:bg-[#2B2F31] rounded-lg text-left transition-colors">
                        Permissions
                    </button>
                </div>
            `,
        };

        // 主工作区内容模板
        const workspaceContent = {
            database: `
                <div class="flex-1 flex flex-col">
                    <!-- 上部分：显示区域 (60% 高度) -->
                    <div class="h-[60%] bg-[#1B1E1F] p-6 relative">
                        <div class="h-full border-2 border-dashed border-[#2B2F31] rounded-lg flex items-center justify-center">
                            <span class="text-gray-500">查询结果将在这里显示</span>
                        </div>
                        <!-- API文档按钮 -->
                        <button id="api-docs-btn" class="absolute right-4 top-1/2 transform -translate-y-1/2 px-3 py-2 bg-[#2B2F31] hover:bg-[#3a3f41] rounded transition-colors">
                            API文档
                        </button>
                    </div>

                    <!-- 下部分：SQL输入区域 (40% 高度) -->
                    <div class="h-[40%] bg-[#121414] p-6 relative">
                        <div class="absolute top-6 right-6">
                            <button id="ai-generated" class="px-4 py-2 bg-[#2B2F31] hover:bg-[#3a3f41] rounded-lg text-sm transition-colors">
                                AI-Generated
                            </button>
                        </div>
                        <textarea 
                            class="w-full h-full bg-[#121414] border border-[#2B2F31] rounded-lg p-4 text-gray-200 placeholder-gray-500 resize-none focus:outline-none focus:border-[#4a4f52]"
                            placeholder="在这里输入SQL查询..."
                        ></textarea>
                    </div>
                </div>
            `,
            permissions: `
                <div class="flex-1 bg-[#1B1E1F] p-6">
                    <h3 class="text-lg font-semibold mb-4">数据库表权限管理</h3>
                    <div class="overflow-x-auto">
                        <table class="min-w-full bg-[#2B2F31] rounded-lg">
                            <thead>
                                <tr class="border-b border-gray-600">
                                    <th class="px-4 py-3 text-left">表名</th>
                                    <th class="px-4 py-3 text-left">读取权限</th>
                                    <th class="px-4 py-3 text-left">写入权限</th>
                                    <th class="px-4 py-3 text-left">删除权限</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="border-b border-gray-700 hover:bg-[#3a3f41]">
                                    <td class="px-4 py-3">users</td>
                                    <td class="px-4 py-3"><input type="checkbox" checked class="rounded"></td>
                                    <td class="px-4 py-3"><input type="checkbox" class="rounded"></td>
                                    <td class="px-4 py-3"><input type="checkbox" class="rounded"></td>
                                </tr>
                                <tr class="border-b border-gray-700 hover:bg-[#3a3f41]">
                                    <td class="px-4 py-3">products</td>
                                    <td class="px-4 py-3"><input type="checkbox" checked class="rounded"></td>
                                    <td class="px-4 py-3"><input type="checkbox" checked class="rounded"></td>
                                    <td class="px-4 py-3"><input type="checkbox" class="rounded"></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="mt-4 text-gray-400">
                        <p>请选择一个单元格</p>
                    </div>
                </div>
            `,
            folder: `
                <div class="flex-1 bg-[#1B1E1F] p-6">
                    <h3 class="text-lg font-semibold mb-4">数据库表 - files</h3>
                    <div class="overflow-x-auto">
                        <table class="min-w-full bg-[#2B2F31] rounded-lg">
                            <thead>
                                <tr class="border-b border-gray-600">
                                    <th class="px-4 py-3 text-left">ID</th>
                                    <th class="px-4 py-3 text-left">文件名</th>
                                    <th class="px-4 py-3 text-left">大小</th>
                                    <th class="px-4 py-3 text-left">修改时间</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="border-b border-gray-700 hover:bg-[#3a3f41]">
                                    <td class="px-4 py-3">1</td>
                                    <td class="px-4 py-3">document.pdf</td>
                                    <td class="px-4 py-3">2.5 MB</td>
                                    <td class="px-4 py-3">2024-01-15</td>
                                </tr>
                                <tr class="border-b border-gray-700 hover:bg-[#3a3f41]">
                                    <td class="px-4 py-3">2</td>
                                    <td class="px-4 py-3">image.jpg</td>
                                    <td class="px-4 py-3">1.2 MB</td>
                                    <td class="px-4 py-3">2024-01-14</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            `,
            records: `
                <div class="flex-1 flex flex-col bg-[#1B1E1F]">
                    <!-- 搜索栏 -->
                    <div class="p-4 border-b border-gray-700">
                        <input type="text" placeholder="搜索记录..." class="w-full px-4 py-2 bg-[#2B2F31] rounded-lg focus:outline-none focus:border-[#4a4f52] border border-transparent">
                    </div>
                    <div class="flex flex-1 overflow-hidden">
                        <!-- Info栏 -->
                        <div class="w-64 bg-[#181A1B] p-4 overflow-y-auto">
                            <div class="space-y-2">
                                <label class="flex items-center space-x-2 p-2 hover:bg-[#2B2F31] rounded cursor-pointer">
                                    <input type="checkbox" class="record-checkbox rounded">
                                    <span>查询记录 1</span>
                                </label>
                                <label class="flex items-center space-x-2 p-2 hover:bg-[#2B2F31] rounded cursor-pointer">
                                    <input type="checkbox" class="record-checkbox rounded">
                                    <span>查询记录 2</span>
                                </label>
                                <label class="flex items-center space-x-2 p-2 hover:bg-[#2B2F31] rounded cursor-pointer">
                                    <input type="checkbox" class="record-checkbox rounded">
                                    <span>查询记录 3</span>
                                </label>
                            </div>
                        </div>
                        <!-- 显示区域和日期栏 -->
                        <div class="flex-1 flex flex-col p-4">
                            <div class="flex-1 overflow-y-auto">
                                <div class="record-item p-3 hover:bg-[#2B2F31] rounded cursor-pointer mb-2" data-date="2024-01-15">
                                    <p>SELECT * FROM users WHERE id = 1</p>
                                </div>
                                <div class="record-item p-3 hover:bg-[#2B2F31] rounded cursor-pointer mb-2" data-date="2024-01-14">
                                    <p>UPDATE products SET price = 99.99 WHERE id = 5</p>
                                </div>
                            </div>
                            <div class="border-t border-gray-700 pt-2 mt-2">
                                <p class="text-sm text-gray-400">日期: <span id="selected-date">未选择</span></p>
                            </div>
                        </div>
                    </div>
                </div>
            `,
            aiSettings: `
                <div class="flex-1 bg-[#1B1E1F] p-6">
                    <h3 class="text-lg font-semibold mb-4">AI 设置</h3>
                    <p class="text-gray-400">AI 设置内容将在这里显示</p>
                </div>
            `,
            accountSettings: `
                <div class="flex-1 bg-[#1B1E1F] p-6">
                    <h3 class="text-lg font-semibold mb-4">账户设置</h3>
                    <p class="text-gray-400">账户设置内容将在这里显示</p>
                </div>
            `,
        };

        // 获取元素
        const rightSidebar = document.getElementById("right-sidebar");
        const mainWorkspace = document.getElementById("main-workspace");
        const defaultWorkspace = document.getElementById("default-workspace");
        const rightSlidebar = document.getElementById("right-slidebar");
        const slidebarTitle = document.getElementById("slidebar-title");
        const slidebarContent = document.getElementById("slidebar-content");
        const bottomModal = document.getElementById("bottom-modal");

        // 当前激活的部分
        let currentSection = null;

        // 显示默认工作区
        function showDefaultWorkspace() {
            defaultWorkspace.style.display = 'flex';
            mainWorkspace.innerHTML = '';
            mainWorkspace.appendChild(defaultWorkspace);
            currentSection = null;
        }

        // 显示数据库部分
        function showDatabaseSection() {
            currentSection = 'database';
            defaultWorkspace.style.display = 'none';
            mainWorkspace.innerHTML = workspaceContent.database;
            
            // 添加事件监听器
            document.getElementById('api-docs-btn').addEventListener('click', () => {
                showRightSlidebar('API 文档', '<p class="text-gray-400">API 文档内容将在这里显示</p>');
            });
            
            document.getElementById('ai-generated').addEventListener('click', () => {
                showRightSlidebar('AI 助手', `
                    <div class="flex flex-col h-full">
                        <div class="flex-1 overflow-y-auto mb-4">
                            <div class="bg-[#2B2F31] p-3 rounded mb-2">
                                <p class="text-sm">你好！我是AI助手，有什么可以帮助你的吗？</p>
                            </div>
                        </div>
                        <div class="flex space-x-2">
                            <input type="text" placeholder="输入消息..." class="flex-1 px-3 py-2 bg-[#2B2F31] rounded focus:outline-none">
                            <button class="px-4 py-2 bg-[#2B2F31] hover:bg-[#3a3f41] rounded transition-colors">发送</button>
                        </div>
                    </div>
                `);
            });
        }

        // 显示右侧滑入侧边栏
        function showRightSlidebar(title, content) {
            slidebarTitle.textContent = title;
            slidebarContent.innerHTML = content;
            rightSlidebar.classList.remove('translate-x-full');
        }

        // 隐藏右侧滑入侧边栏
        function hideRightSlidebar() {
            rightSlidebar.classList.add('translate-x-full');
        }

        // 显示底部确认窗口
        function showBottomModal() {
            bottomModal.classList.add('show');
        }

        // 隐藏底部确认窗口
        function hideBottomModal() {
            bottomModal.classList.remove('show');
        }

        // 导航按钮事件
        document.getElementById('logo-btn').addEventListener('click', () => {
            rightSidebar.innerHTML = sidebarContent.logo;
            showDefaultWorkspace();
        });

        document.getElementById('settings-btn').addEventListener('click', () => {
            rightSidebar.innerHTML = sidebarContent.settings;
            currentSection = 'settings';
            defaultWorkspace.style.display = 'none';
            mainWorkspace.innerHTML = '<div class="flex-1 bg-[#1B1E1F] p-6"><h3 class="text-lg font-semibold mb-4">设置</h3><p class="text-gray-400">请从右侧选择设置选项</p></div>';
            
            // 添加设置按钮事件
            setTimeout(() => {
                document.getElementById('ai-settings')?.addEventListener('click', () => {
                    mainWorkspace.innerHTML = workspaceContent.aiSettings;
                });
                document.getElementById('account-settings')?.addEventListener('click', () => {
                    mainWorkspace.innerHTML = workspaceContent.accountSettings;
                });
            }, 100);
        });

        document.getElementById('records-btn').addEventListener('click', () => {
            rightSidebar.innerHTML = '';
            currentSection = 'records';
            defaultWorkspace.style.display = 'none';
            mainWorkspace.innerHTML = workspaceContent.records;
            
            // 添加记录事件
            setTimeout(() => {
                // 记录项点击事件
                document.querySelectorAll('.record-item').forEach(item => {
                    item.addEventListener('click', function() {
                        const date = this.getAttribute('data-date');
                        document.getElementById('selected-date').textContent = date;
                        showRightSlidebar('记录详情', `
                            <div class="text-gray-300">
                                <p class="mb-2"><strong>查询语句:</strong></p>
                                <p class="bg-[#2B2F31] p-3 rounded">${this.querySelector('p').textContent}</p>
                                <p class="mt-4 mb-2"><strong>执行时间:</strong></p>
                                <p>${date} 14:30:25</p>
                                <p class="mt-4 mb-2"><strong>执行结果:</strong></p>
                                <p class="text-green-400">成功返回 2 行数据</p>
                            </div>
                        `);
                    });
                });
                
                // 复选框事件
                document.querySelectorAll('.record-checkbox').forEach(checkbox => {
                    checkbox.addEventListener('change', function() {
                        if (document.querySelectorAll('.record-checkbox:checked').length > 0) {
                            showBottomModal();
                        }
                    });
                });
            }, 100);
        });

        document.getElementById('folder-btn').addEventListener('click', () => {
            rightSidebar.innerHTML = sidebarContent.folder;
            currentSection = 'folder';
            defaultWorkspace.style.display = 'none';
            mainWorkspace.innerHTML = workspaceContent.folder;
        });

        document.getElementById('database-btn').addEventListener('click', () => {
            rightSidebar.innerHTML = sidebarContent.database;
            showDatabaseSection();
            
            // 添加数据库按钮事件
            setTimeout(() => {
                document.getElementById('permissions')?.addEventListener('click', () => {
                    currentSection = 'permissions';
                    mainWorkspace.innerHTML = workspaceContent.permissions;
                });
                
                document.getElementById('create-db')?.addEventListener('click', () => {
                    showRightSlidebar('创建数据库', `
                        <div class="space-y-4">
                            <div>
                                <label class="block mb-2">数据库名称</label>
                                <input type="text" class="w-full px-3 py-2 bg-[#2B2F31] rounded focus:outline-none">
                            </div>
                            <div>
                                <label class="block mb-2">字符集</label>
                                <select class="w-full px-3 py-2 bg-[#2B2F31] rounded focus:outline-none">
                                    <option>utf8mb4</option>
                                    <option>utf8</option>
                                    <option>latin1</option>
                                </select>
                            </div>
                            <button class="w-full px-4 py-2 bg-[#2B2F31] hover:bg-[#3a3f41] rounded transition-colors">创建</button>
                        </div>
                    `);
                });
            }, 100);
        });

        // 关闭侧边栏按钮
        document.getElementById('close-slidebar').addEventListener('click', hideRightSlidebar);

        // 底部模态框按钮
        document.getElementById('modal-cancel').addEventListener('click', hideBottomModal);
        document.getElementById('modal-confirm').addEventListener('click', () => {
            hideBottomModal();
            // 这里可以添加确认后的操作
        });

        // 初始显示默认工作区
        showDefaultWorkspace();

        // 简单的打字功能示例
        document.addEventListener('DOMContentLoaded', () => {
            const textarea = document.querySelector('textarea');
            if (textarea) {
                textarea.addEventListener('keydown', (e) => {
                    if (e.key === 'Tab') {
                        e.preventDefault();
                        const start = textarea.selectionStart;
                        const end = textarea.selectionEnd;
                        textarea.value = textarea.value.substring(0, start) + '    ' + textarea.value.substring(end);
                        textarea.selectionStart = textarea.selectionEnd = start + 4;
                    }
                });
            }
        });
    </script>
</body>
</html>